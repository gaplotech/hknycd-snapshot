<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>2020香港除夕倒數大抽獎</title>
    <link rel="stylesheet" href="js/FlipClock-master/compiled/flipclock.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="js/featherlight-master/release/featherlight.min.css">
    <script src="js/main.js"></script>
    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/featherlight-master/release/featherlight.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-155005261-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-155005261-1');
    </script>
    <style type="text/css">
        .featherlight-content {
            background: transparent !important;
        }

        .featherlight .featherlight-close-icon {
            color: #fff !important;
        }

        .tnc-text {
            color: #fff;
        }

        .tnc-text:hover {
            color: #ccc;
        }
    </style>
</head>
<body class="page-show-lucky-draw-number">
<div id="mask-wrapper"></div>
<div class="site-content">
    <div class="background"></div>
    <div class="container">
        <header>
            <div class="language-side">
                <div class="language">
                    <a href="../en" class="en lang">ENG</a>
                </div>
            </div>
            <div class="logo-side">
                <div class="left-side">
                    <div class="sponsor1 sponsor"><img src="images/TB2020_Sponsor_chi_1.png" alt=""></div>
                    <div class="sponsor2 sponsor"><img src="images/TB2020_Sponsor_chi_2.png" alt=""></div>
                </div>
                <div class="right-side">
                    <div class="sponsor3 sponsor"><img src="images/TB2020_Sponsor_chi_3-tb.png" alt=""></div>
                    <div class="sponsor4 sponsor"><img src="images/TB2020_Sponsor_chi_3-dragon.png" alt=""></div>
                </div>
            </div>
        </header>
        <a href="../zh-Hant" class="lucky-draw-logo small"></a>
        <div class="form">
            <div class="title"></div>
            <div class="box">
                <div class="prize-site">
                    <div class="prize-title prize">
                        <div class="wrapper">
                            <div class="text">豐富獎品<br>包括</div>
                            <img src="images/luckydraw_prize/HKTB2020_text_v20_prize_chi_1.png" alt="">
                        </div>
                    </div><!--
                    --><a target="_blank" href="file/1_Cathay Pacific_Terms and Conditions_TC.pdf" class="prize1 prize">
                    <div class="wrapper">
                        <img src="images/luckydraw_prize/HKTB2020_text_v20_prize_chi_1.png" alt="">
                    </div>
                </a><!--
                    --><a class="prize2 prize">
                    <div class="wrapper">
                        <img src="images/luckydraw_prize/HKTB2020_text_v20_prize_chi_2.png" alt="">
                    </div>
                </a><!--
                    --><a target="_blank" href="file/2_Disneyland_Terms_and_Conditions.pdf" class="prize3 prize">
                    <div class="wrapper">
                        <img src="images/luckydraw_prize/HKTB2020_text_v20_prize_chi_3.png" alt="">
                    </div>
                </a><!--
                    --><div class="line"></div><a target="_blank" href="file/3_Ocean_Park_Marriott_Hotel_Accommodation_Terms_and_Conditions.pdf" class="prize4 prize">
                    <div class="wrapper">
                        <img src="images/luckydraw_prize/HKTB2020_text_v20_prize_chi_4.png" alt="">
                    </div>
                </a><!--
                    --><a target="_blank" href="file/4_Grand_Hyatt_Terms_and_Conditions.pdf" class="prize5 prize">
                    <div class="wrapper">
                        <img src="images/luckydraw_prize/HKTB2020_text_v20_prize_chi_5.png" alt="">
                    </div>
                </a><!--
                    --><a target="_blank" href="file/5_The_Peninsula_Hotel_Limited_Terms_and_Conditions.pdf" class="prize6 prize">
                    <div class="wrapper">
                        <img src="images/luckydraw_prize/HKTB2020_text_v20_prize_chi_6.png" alt="">
                    </div>
                </a><!--
                    --><a target="_blank" href="file/6_Ocean_Park_Marriott_Spa_Package_Terms_and_Conditions.pdf" class="prize7 prize">
                    <div class="wrapper">
                        <img src="images/luckydraw_prize/HKTB2020_text_v20_prize_chi_7.png" alt="">
                    </div>
                </a>
                    <div class="line"></div>
                </div>
                <div class="rules-side-desktop">
                    <div class="rules">
                        填妥個人資料並創建帳戶後，即可參與抽獎。請確保所有資料準確無誤，所收集資料將作核對領獎資格及登入用途。
                    </div>
                </div>
                <div class="selection-side">
                    <div class="select-text">請選擇 :</div>
                    <ul>
                        <li>
                            <div class="hk button purple">香港居民</div>
                        </li><!--
                        --><li>
                        <div class="visitor button blue">在港旅客</div>
                    </li>
                    </ul>
                </div>
                <div id="g-recaptcha-login" data-size="invisible"></div>
                <div class="form-detail hk">
                    <div class="login">
                        <div class="login-title">查看電子抽獎券</div>
                        <form action="#">
                            <div class="form-row">
                                <div class="form-label">
                                    <label for="login-contact">電郵地址</label>
                                </div>
                                <input id="login-contact" name="username" type="text" class="form-input" placeholder="輸入電郵地址"/>
                            </div>
                            <div class="form-row">
                                <div class="form-label">
                                    <label for="login-code">身份證號碼</label>
                                </div>
                                <input id="login-code" name="password" type="text" class="form-input" placeholder="英文字母及首四位數字"/>
                            </div>
                            <div class="button-side">
                                <input type="hidden" name="is_citizen" value="2" />
                                <button id="login-button" class="submit-button button purple">登入</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="form-detail visitor">
                    <div class="login">
                        <div class="login-title">登入</div>
                        <form action="#">
                            <div class="form-row">
                                <div class="form-label">
                                    <label for="login-email">電郵地址</label>
                                </div>
                                <input id="login-email" name="username" type="text" class="form-input"/>
                            </div>
                            <div class="form-row">
                                <div class="form-label">
                                    <label for="login-passport">旅遊證件號碼</label>
                                </div>
                                <input id="login-passport" name="password" type="text" class="form-input" placeholder="首五位英文字母及數字"/>
                            </div>
                            <div class="button-side">
                                <input type="hidden" name="is_citizen" value="1" />
                                <button id="login-button2" class="submit-button button purple">登入</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="promotion-code">
        推廣生意的競賽牌照號碼: 53010-11
    </div>
</div>
<script type="text/javascript">
    

    $(document).ready(function() {
        var $selectionSide = $('.selection-side');
        var $selectionSideSelectedButton = $selectionSide.find('.button');
        var $currentRegion;

        var setRegion = function() {
            var $this = $(this);

            $currentRegion = $this.attr('class').split(' ')[0];
            $selectionSide.hide();

            //console.log($currentRegion);

            $('.form-detail' + '.' + $currentRegion).show();
        };

        $selectionSideSelectedButton.on('click', setRegion);

        if (getCookie('access_token') != null) {
            window.location.href = 'show-lucky-draw-number-for-user.html';
            return;
        }

        $('form').submit(function(e) {
            e.preventDefault();

            //showLoginRecaptchaWidget();
            onLogin('88recaptcha');
        });
    });

    var loginRecaptchaWidget = null;
    var requestLang = 1;

    function onLogin(token) {
        try {
            //grecaptcha.reset(loginRecaptchaWidget);
        }
        catch(error) {
        }

        var $form = $('form:visible');
        $('#mask-wrapper').show();
        $.ajax({
            type: 'POST',
            dataType: 'json', cache: false,
            url: config.endpoint + '/v1/login',
            data: {
                lang: requestLang,
                is_citizen: $form.find('input[name="is_citizen"]').val(),
                username: $form.find('input[name="username"]').val(),
                password: $form.find('input[name="password"]').val(),
                token: token,
                type: 1
            },
            success: function (data) {
                if (data.status == 'success') {
                    if (data.detail != null) {
                        localStorage.setItem('access_token', data.detail);
                        window.location.href = 'show-lucky-draw-number-for-user.html';
                    }
                    else {
                        location.reload();
                    }
                }
                else {
                    var errorMessage = '';
                    if (data.detail != null && data.detail.length > 0) {
                        errorMessage = '';

                        for (var i = 0; i < data.detail.length; ++i) {
                            if (i > 0) {
                                errorMessage += '\n';
                            }

                            errorMessage += data.detail[i];
                        }
                    }
                    else {
                        if (requestLang == 1) {
                            errorMessage = '系統繁忙，請稍後再試。';
                        }
                        else {
                            errorMessage = 'The server is busy. Please try again later.';
                        }
                    }

                    alert(errorMessage);
                    $('#mask-wrapper').hide();
                }
            },
            error: function (data) {
                    if (data && data.status >= 500) {
  window.location.href = 'system-busy.html';
}
                },
            statusCode: {
                400: function (data) {
                    var errorMessage = '';

                    $.each(data.responseJSON.detail, function (key, value) {
                        errorMessage += value;
                        errorMessage += '\n';
                    });

                    alert(errorMessage);
                    $('#mask-wrapper').hide();
                },
                401: function () {
                    localStorage.removeItem('access_token');
                    window.location.href = '/zh-Hant';
                },
                403: function (data) {
                    var errorMessage = '';

                    $.each(data.responseJSON.detail, function (key, value) {
                        errorMessage += value;
                        errorMessage += '\n';
                    });

                    alert(errorMessage);
                    $('#mask-wrapper').hide();
                }
            }
        });
    }

    function showLoginRecaptchaWidget() {
        try {
          //grecaptcha.reset(loginRecaptchaWidget);
           //grecaptcha.execute(loginRecaptchaWidget);
        }
        catch(error) {
        }
    }

    var onloadRecaptchaCallback = function () {

        //grecaptcha.reset(loginRecaptchaWidget);
    };
</script>
<!--<script src="https://www.google.com/recaptcha/api.js?onload=onloadRecaptchaCallback&render=explicit" async defer></script>-->
</body>
</html>